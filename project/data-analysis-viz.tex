\chapter{Data Analysis and Visualization} \label{chap:data-analysis-viz}
Collecting and managing data is a key part of this project, although simply collecting data does not provide any benefit to athletes. Data analysis and visualization are essential to extract useful information from the data. This chapter will discuss the data analysis and visualization process, including cleaning of the data collected, the analysis performed, and the visualizations generated and presented as feedback to users.

\section{Data Cleaning}
The data collection step was developed in a way to reduce any cognitive load for users. As a result, there are a number of data sources, and therefore a number of data formats, which need to be cleaned and transformed into a uniform format for further analysis. Furthermore, some athletes might use a number of devices to track a session so matching multiple session results to a given session is necessary as well. All the raw data from the data providers was stored throughout the project in case the data cleaning steps changed, this allowed database tables to be as small, and queryable, as possible.
\subsection{Identifying valuable data}
In order to begin data cleaning, it was important to understand what information was valuable. In order to do this, collected data was analysed for what information was available across each session provided, then understanding what basic analysis and feedback would be most useful to athletes. The most basic information clearly needed is the date and time of a session, what modality of session it is (row, ergometer, or other), and what type of session it is (endurance, interval, strength). These modalities and types were intentionally kept quite simple, with only three options, in order to make analysis easier to start. Next, in order to do any kind of fatigue or training impulse analysis, the duration of a session needed to be considered, along with any available heart rate or RPE information. Finally, rowers measure progress in training through mileage so a sessions mileage, where appropriate, was included in this standardised model. As a result of this brief macro-analysis of the data and expected analysis results, the "Standard Exercise Model" described in the previous chapter (\autoref{tab:std_exercise_model}) was generated.

\subsection{Developing a cleaning process}
The data collection pipeline ingests sessions regardless of type, this resulted in a series of functions which handled data from different providers, and performed analysis on session data to appropriately classify each session, and normalise to the standard exercise model developed in the previous chapter. Given the time constraints of this project, including non-training data in analysis did not add significantly more value so was largely ignored. 

\subsubsection{Identifying session modality}
The first step in cleaning data was identifying the sessions modality. Was a session a row, an erg, or something else. Typically the sessions were tagged, with sessions coming from Strava being classed as "rowing", regardless of if they were on the water or on the rowing machine, causing some issues. Sessions not explicitly tagged by Strava, for example, or ingested from Concept2 were initially flagged as other. This approach, however, did result in some issues. One member of the Commercial Senior Squad, for example, uses a running watch which classifies on the water sessions as runs. He also happens to be an avid runner so it was necessary to analyse sessions to determine if they occurred on land or on water. As a result of this case, and the issues with differentiating on the water or on the machine "rowing" from Strava, it became clear a more developed approach was necessary to accurately identify session types. Differentiating on-the-water rows and erg sessions was much easier. In many cases, erg sessions were provided through the Concept2 API and were easily identified. On-the-water rows were typically provided through Strava, and were identified by the activity type and generally the presence of GPS data. Users who did not have a GPS in the boat could manually insert sessions and using the name of the session could be used to identify the modality.


\subsubsection{Identifying session type}
The next challenge in the data cleaning process was determining if a session was an endurance or interval session. Typically, the distance and duration can be used to identify a session. For erg sessions provided through the Concept2 API, distance, time, watts, and pace were included at a minimum. It is possible to differentiate endurance or interval sessions when comparing pace with other sessions from that user. The ideal session data from Concept2, though, includes highly detailed information about a session such as distance, duration, average wattage, pace, and heart rate, and detailed stroke-by-stroke data including wattage, pace, and heart rate. Many athletes, though, choose not to connect a heart rate monitor to their rowing machine, so it was necessary to match heart rate data, recorded through Polar, with the stroke data, when available. Using heart rate it is very easy to identify if an erg session is an interval or endurance session.

Identifying the type of an on the water row was more difficult. Some on the water sessions may be a mix of interval and endurance. A common training session for the researcher throughout this project was 10 kilometers of endurance paddling, followed by 10 kilometers of interval work. In this case, the session could be classified as an interval session. The researcher, however, would seperate this into two sessions, classifying the first 10 kilometers as endurance training, considering duration and average heart rate, and the second 10 kilometers as interval training, again considering the duration and average heart rate to calculate the training impulse. This is a clear example of the limitations of the data collected. The researcher could manually classify this session as an endurance session, but this would not be scalable. A model could be developed to classify this session, but unfortunately not enough data was collected and classified to warrant the time needed to develop the model. As a result, the approach used to classify sessions relied on distance and average heart rate, if available. Sessions greater than 18 kilometers in distance were considered endurance sessions, then average heart rate was used to identify endurance or interval sessions below this threshold. This is a limitation of the data collected and is a clear area for future work.

Finally, strength sessions needed to be identified. When a session was ingested as a strength session this was typically already tagged. Many users did not log strength sessions given the use of an external app, like TeamBuildr\footnote{\href{https://www.teambuildr.com/}{TeamBuildr} is an online strength and conditioning platform for coaches to build S\&C plans for their athletes}, to track these sessions. As a result, strength sessions were not included in the analysis. This is another clear limitation of the data collection process implemented, and an area for future work.

\section{Data Analysis}

\section{Data Visualisation}